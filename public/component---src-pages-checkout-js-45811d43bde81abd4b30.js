(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{152:function(e,t,a){"use strict";a.r(t);a(86),a(184);var r=a(8),n=a.n(r),i=a(245),s=a.n(i),l=a(0),o=a.n(l),d=a(59),c=a(218),m=a(197),h=a(179),u=a(505),p=a(491),f=a(304),v=a(503),g=a(501),y=a(502),E=a(500),b=a(454),w=a.n(b),N=a(247);function V(){var e=s()(["\n  @media (min-width: 768px) {\n    display:flex & > :nth-child(1) {\n      width: 280px;\n    }\n    & > :nth-child(2) {\n      width: 100%;\n    }\n  }\n"]);return V=function(){return e},e}var k=[{key:"dhl",text:"DHL",value:"dhl"},{key:"ups",text:"UPS",value:"ups"}],C=N.a.div(V()),I=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleUserInput=function(e){var t,r=e.target.name,n=e.target.value;a.setState(((t={})[r]=n,t),function(){a.validateField(r,n)})},a.toggleConfirmation=function(){return a.setState({conditions:!a.state.conditions,conditionsValid:!a.state.conditionsValid},a.validateForm)},a.onToken=function(e){fetch("/save-stripe-token",{method:"POST",body:JSON.stringify(e)}).then(function(e){e.json().then(function(e){alert("We are in business, "+e.email)})})},a.state={charge:a.props.cart.valueAll,email:"",firstName:"",lastName:"",address:"",phone:"",delivery:"",condutions:!1,formErrors:{email:"",firstName:"",lastName:"",address:"",phone:"",delivery:""},firstNameValid:!1,lastNameValid:!1,addressValid:!1,phoneValid:!1,deliveryValid:!1,formValid:!1,conditionsValid:!1},a}n()(t,e);var a=t.prototype;return a.validateField=function(e,t){var a=this.state.formErrors,r=this.state.emailValid,n=this.state.firstNameValid,i=this.state.lastNameValid,s=this.state.addressValid,l=this.state.phoneValid,o=this.state.deliveryValid;switch(e){case"email":r=t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i),a.email=r?"":" is invalid";break;case"firstName":n=t.length>=3,a.firstName=n?"":" is too short";break;case"lastName":i=t.length>=3,a.lastName=i?"":" is too short";break;case"address":s=t.length>20,a.address=s?"":" is too short";break;case"phone":l=t.match(/\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/),a.phone=l?"":" is too short";break;case"delivery":o="dhl"===t||"ups",a.delivery=o?"":"no valid shipping"}this.setState({formErrors:a,emailValid:r,firstNameValid:n,lastNameValid:i,addressValid:s,phoneValid:l},this.validateForm)},a.validateForm=function(){this.setState({formValid:this.state.emailValid&&this.state.firstNameValid&&this.state.lastNameValid&&this.state.addressValid&&this.state.conditionsValid})},a.errorClass=function(e){return 0===e.length?"":"has-error"},a.render=function(){return o.a.createElement(c.a,null,o.a.createElement(m.a,{title:"Checkout"}),o.a.createElement(C,null,o.a.createElement("div",{style:{marginBottom:"2rem"}},o.a.createElement(u.a,{verticalAlign:"middle"},o.a.createElement(u.a.Item,null,o.a.createElement(u.a.Content,null,o.a.createElement(u.a.Header,{style:{marginBottom:"1em"}},o.a.createElement("p",null,"Order Summary "),o.a.createElement("p",null,"Price: ",this.props.cart.valueAll," $"),o.a.createElement("p",null,"Shipping: ",this.props.cart.valueAll," $")))),this.props.cart.items.map(function(e){var t=e.product;return o.a.createElement(u.a.Item,{key:"card-item-"+t.id},o.a.createElement(u.a.Content,null,o.a.createElement(u.a.Header,null,o.a.createElement(p.a,{avatar:!0,src:t.img[0],style:{margin:0}}),o.a.createElement("span",null," ",e.count," X ",t.name," ")),o.a.createElement(u.a.Description,null,o.a.createElement(f.a,{style:{width:"100px"},tag:!0},"Price: ",e.value," $"))))}))),o.a.createElement("div",null,o.a.createElement(v.a,null,o.a.createElement(v.a.Group,{widths:3},o.a.createElement(v.a.Input,{error:this.errorClass(this.state.formErrors.email),type:"email",name:"email",required:!0,label:"Email",placeholder:"Email",value:this.state.email,onChange:this.handleUserInput}),o.a.createElement(v.a.Input,{error:this.errorClass(this.state.formErrors.firstName),name:"firstName",required:!0,label:"First Name",placeholder:"First Name",value:this.state.firstName,onChange:this.handleUserInput}),o.a.createElement(v.a.Input,{error:this.errorClass(this.state.formErrors.lastName),name:"lastName",required:!0,label:"Last Name",placeholder:"Last Name",value:this.state.lastName,onChange:this.handleUserInput})),o.a.createElement(v.a.Group,{widths:2},o.a.createElement(v.a.Input,{error:this.errorClass(this.state.formErrors.address),name:"address",required:!0,label:"Address",placeholder:"Address",value:this.state.address,onChange:this.handleUserInput}),o.a.createElement(v.a.Input,{error:this.errorClass(this.state.formErrors.phone),name:"phone",label:"Phone",placeholder:"Phone",value:this.state.phone,onChange:this.handleUserInput})),o.a.createElement(v.a.Field,{required:!0,control:g.a,options:k,error:this.errorClass(this.state.formErrors.delivery),label:"Delivery",name:"delivery",placeholder:"Delivery",search:!0,onChange:this.handleUserInput}),o.a.createElement(v.a.Field,{control:y.a,label:"Coments",placeholder:"..."}),o.a.createElement(v.a.Field,null,o.a.createElement(E.a,{name:"conditions",checked:this.state.conditions,onChange:this.toggleConfirmation,required:!0,label:"I agree to the Terms and Conditions"}))),this.state.formValid?o.a.createElement(w.a,{onClick:function(e){return e.preventDefault()},token:this.onToken,label:"Pay "+this.state.charge+"$ with card",stripeKey:"my_PUBLISHABLE_stripekey"}):o.a.createElement(f.a,{color:"red"},"Fill form"))))},t}(o.a.Component);t.default=Object(d.b)(function(e){return{cart:e.cart}},{substract_cart:h.d,toggle_drawer:h.e})(I)},197:function(e,t,a){"use strict";var r=a(198),n=a(0),i=a.n(n),s=a(2),l=a.n(s),o=a(248),d=a.n(o),c=a(177);function m(e){var t=e.description,a=e.lang,n=e.meta,s=e.keywords,l=e.title;return i.a.createElement(c.StaticQuery,{query:h,render:function(e){var r=t||e.site.siteMetadata.description;return i.a.createElement(d.a,{htmlAttributes:{lang:a},title:l,titleTemplate:"%s | "+e.site.siteMetadata.title,meta:[{name:"description",content:r},{property:"og:title",content:l},{property:"og:description",content:r},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:e.site.siteMetadata.author},{name:"twitter:title",content:l},{name:"twitter:description",content:r}].concat(s.length>0?{name:"keywords",content:s.join(", ")}:[]).concat(n)})},data:r})}m.defaultProps={lang:"en",meta:[],keywords:[]},m.propTypes={description:l.a.string,lang:l.a.string,meta:l.a.array,keywords:l.a.arrayOf(l.a.string),title:l.a.string.isRequired},t.a=m;var h="1025518380"},198:function(e){e.exports={data:{site:{siteMetadata:{title:"Gatsby Default Starter",description:"Kick off your next, great Gatsby project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.",author:"@gatsbyjs"}}}}}}]);
//# sourceMappingURL=component---src-pages-checkout-js-45811d43bde81abd4b30.js.map